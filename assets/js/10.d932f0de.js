(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{351:function(s,t,a){"use strict";a.r(t);var n=a(6),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"基础知识"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#基础知识"}},[s._v("#")]),s._v(" 基础知识")]),s._v(" "),t("h2",{attrs:{id:"_1-什么是mongodb"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-什么是mongodb"}},[s._v("#")]),s._v(" 1. 什么是MongoDB")]),s._v(" "),t("ul",[t("li",[s._v("MongoDB是一个基于分布式文件存储的开源数据库系统")]),s._v(" "),t("li",[s._v("MongoDB 将数据存储为一个文档，数据结构由键值(key=>value)对组成。MongoDB 文档类似于 JSON 对象。字段值可以包含其他文档，数组及文档数组。")])]),s._v(" "),t("h2",{attrs:{id:"_2-mongodb安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-mongodb安装"}},[s._v("#")]),s._v(" 2. MongoDB安装")]),s._v(" "),t("h3",{attrs:{id:"_2-1-windows安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-windows安装"}},[s._v("#")]),s._v(" 2.1 windows安装")]),s._v(" "),t("p",[s._v("Windows官方安装指南")]),s._v(" "),t("p",[s._v("mongodb32位安装版 链接: https://pan.baidu.com/s/1SHJ1vre_CQOE3u-W0zniqQ 密码: chan")]),s._v(" "),t("p",[s._v("MongoDB64位绿色版 链接: https://pan.baidu.com/s/1EkAB2SrcU1mfMfff_WDxtA 密码: w913")]),s._v(" "),t("p",[s._v("mongo客户端 链接: https://pan.baidu.com/s/1YFxLZ-55D-WFR8os2fXN0A 密码: 61qd")]),s._v(" "),t("h3",{attrs:{id:"_2-2-mac安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-mac安装"}},[s._v("#")]),s._v(" 2.2 mac安装")]),s._v(" "),t("ul",[t("li",[s._v("Mac官方安装指南")]),s._v(" "),t("li",[s._v("先安装homebrew")]),s._v(" "),t("li",[s._v("http://brew.sh/")]),s._v(" "),t("li",[s._v("使用brew安装mongodb")]),s._v(" "),t("li",[s._v("brew install mongodb")]),s._v(" "),t("li",[s._v("再安装可视化工具 Robomongo")])]),s._v(" "),t("h2",{attrs:{id:"_3-mongodb启动与连接"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-mongodb启动与连接"}},[s._v("#")]),s._v(" 3. mongodb启动与连接")]),s._v(" "),t("h3",{attrs:{id:"_3-1-windows启动服务器端"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-windows启动服务器端"}},[s._v("#")]),s._v(" 3.1 windows启动服务器端")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("找到mongodb安装目录,一般是 C:\\Program Files\\MongoDB 2.6 Standard\\bin")])]),s._v(" "),t("li",[t("p",[s._v("按下Shift+鼠标右键,选择在此处打开命令窗口")])]),s._v(" "),t("li",[t("p",[s._v("在除C盘外的盘符新建一个空目录,如 D:\\Mongodb\\data")])]),s._v(" "),t("li",[t("p",[s._v("在命令行中输入mongod --dbpath=刚创建的空目录,如")])]),s._v(" "),t("li",[t("p",[s._v("mongod --dbpath=D:\\Mongodb\\data")])]),s._v(" "),t("li",[t("p",[s._v("再按回车键")])]),s._v(" "),t("li",[t("p",[s._v("如果出现waiting for connections on port 27017就表示启动成功,已经在27017端口上监听了客户端的请求")])]),s._v(" "),t("li",[t("p",[s._v("注意：--dbpath后的值表示数据库文件的存储路径,而且后面的路径必须事先创建好，必须已经存在，否则服务开启失败")])]),s._v(" "),t("li",[t("p",[s._v("注意：这个命令窗体绝对不能关,关闭这个窗口就相当于停止了mongodb服务")])])]),s._v(" "),t("h2",{attrs:{id:"_4-添加到window服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-添加到window服务"}},[s._v("#")]),s._v(" 4. 添加到window服务")]),s._v(" "),t("ul",[t("li",[s._v("以管理员身份运行命令")]),s._v(" "),t("li",[s._v("logfile是一个不存在的文件名，而非目录名")]),s._v(" "),t("li",[s._v("mongod.exe --logpath C:\\program1\\MongoDB\\bin\\log\\logfile --logappend --dbpath C:\\program1\\MongoDB\\bin\\data --serviceName MongoDB --install")])]),s._v(" "),t("h2",{attrs:{id:"_4-mongodb基本概念"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-mongodb基本概念"}},[s._v("#")]),s._v(" 4. MongoDB基本概念")]),s._v(" "),t("ul",[t("li",[s._v("数据库 MongoDB的单个实例可以容纳多个独立的数据库，比如一个学生管理系统就可以对应一个数据库实例")]),s._v(" "),t("li",[s._v("集合 数据库是由集合组成的,一个集合用来表示一个实体,如学生集合")]),s._v(" "),t("li",[s._v("文档 集合是由文档组成的，一个文档表示一条记录,比如一位同学张三就是一个文档")]),s._v(" "),t("li",[s._v("mongostat")])]),s._v(" "),t("h2",{attrs:{id:"_5-数据库操作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-数据库操作"}},[s._v("#")]),s._v(" 5. 数据库操作")]),s._v(" "),t("h3",{attrs:{id:"_5-1-使用数据库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-使用数据库"}},[s._v("#")]),s._v(" 5.1 使用数据库")]),s._v(" "),t("p",[s._v("语法")]),s._v(" "),t("ul",[t("li",[s._v("use database_name")]),s._v(" "),t("li",[s._v("database_name 代表数据库的名字")]),s._v(" "),t("li",[s._v("注：如果此数据库存在，则切换到此数据库下,如果此数据库还不存在也可以切过来,但是并不能立刻创建数据库")]),s._v(" "),t("li",[s._v("切换到 school数据库下")])]),s._v(" "),t("p",[s._v("use school")]),s._v(" "),t("h3",{attrs:{id:"_5-2-查看所有数据库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-查看所有数据库"}},[s._v("#")]),s._v(" 5.2 查看所有数据库")]),s._v(" "),t("p",[s._v("语法")]),s._v(" "),t("ul",[t("li",[s._v("show dbs")]),s._v(" "),t("li",[s._v("备注: 我们刚创建的数据库school如果不在列表内， 要显示它，我们需要向school数据库插入一些数据")]),s._v(" "),t("li",[s._v("db.students.insert({name:'zfpx',age:1});")])]),s._v(" "),t("h3",{attrs:{id:"_5-3-查看当前使用的数据库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-查看当前使用的数据库"}},[s._v("#")]),s._v(" 5.3 查看当前使用的数据库")]),s._v(" "),t("p",[s._v("语法")]),s._v(" "),t("ul",[t("li",[s._v("db")]),s._v(" "),t("li",[s._v("注：db代表的是当前数据库 也就是school这个数据库")])]),s._v(" "),t("h3",{attrs:{id:"_5-4-删除数据库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-4-删除数据库"}},[s._v("#")]),s._v(" 5.4 删除数据库")]),s._v(" "),t("p",[s._v("语法")]),s._v(" "),t("p",[s._v("db.dropDatabase()")]),s._v(" "),t("h2",{attrs:{id:"_6-集合操作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-集合操作"}},[s._v("#")]),s._v(" 6. 集合操作")]),s._v(" "),t("h3",{attrs:{id:"_6-1-查看集合帮助"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-查看集合帮助"}},[s._v("#")]),s._v(" 6.1 查看集合帮助")]),s._v(" "),t("p",[s._v("语法")]),s._v(" "),t("p",[s._v("db.students.help();")]),s._v(" "),t("h3",{attrs:{id:"_6-2-查看数据库下的集合"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-2-查看数据库下的集合"}},[s._v("#")]),s._v(" 6.2 查看数据库下的集合")]),s._v(" "),t("p",[s._v("show collections")]),s._v(" "),t("h3",{attrs:{id:"_6-3-创建集合"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-3-创建集合"}},[s._v("#")]),s._v(" 6.3 创建集合")]),s._v(" "),t("h4",{attrs:{id:"_6-3-1-创建一个空集合"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-3-1-创建一个空集合"}},[s._v("#")]),s._v(" 6.3.1 创建一个空集合")]),s._v(" "),t("p",[s._v("db.createCollection(collection_Name)"),t("br"),s._v("\ncollection_Name集合的名称")]),s._v(" "),t("h4",{attrs:{id:"_6-3-2-创建集合并插入一个文档"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-3-2-创建集合并插入一个文档"}},[s._v("#")]),s._v(" 6.3.2 创建集合并插入一个文档")]),s._v(" "),t("p",[s._v("collection_Name集合的名称\ndocument要插入的文档\ndb.collection_Name.insert(document)")]),s._v(" "),t("h2",{attrs:{id:"_7-插入文档"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-插入文档"}},[s._v("#")]),s._v(" 7. 插入文档")]),s._v(" "),t("h3",{attrs:{id:"_7-1-insert"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-1-insert"}},[s._v("#")]),s._v(" 7.1 insert")]),s._v(" "),t("p",[s._v("db.collection_name.insert(document);\n`\ncollection_name 集合的名字\ndocument 插入的文档\n每当插入一条新文档的时候mongodb会自动为此文档生成一个_id属性,_id一定是唯一的，用来唯一标识一个文档 _id也可以直接指定，但如果数据库中此集合下已经有此_id的话插入会失败\ndb.students.insert({_id:1,name:'zfpx',age:1});\nWriteResult({ \"nInserted\" : 1 })\ndb.students.insert({_id:1,name:'zfpx',age:1});")]),s._v(" "),t("h3",{attrs:{id:"_7-2-save"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-2-save"}},[s._v("#")]),s._v(" 7.2 save")]),s._v(" "),t("p",[s._v("db.collection_name.save(document)\ncollection_name 集合的名字\ndocument 插入的文档\n注：如果不指定 _id 字段 save() 方法类似于 insert() 方法。如果指定 _id 字段，则会更新该 _id 的数据。")]),s._v(" "),t("blockquote",[t("p",[s._v('db.students.save({_id:1,name:\'zfpx\',age:1});\nWriteResult({ "nMatched" : 1, "nUpserted" : 0, "nModified" : 0 })\ndb.students.save({_id:1,name:\'zfpx\',age:100});\nWriteResult({ "nMatched" : 1, "nUpserted" : 0, "nModified" : 1 })')])]),s._v(" "),t("h2",{attrs:{id:"_8-更新文档"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-更新文档"}},[s._v("#")]),s._v(" 8. 更新文档")]),s._v(" "),t("h3",{attrs:{id:"_8-1-语法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-1-语法"}},[s._v("#")]),s._v(" 8.1 语法")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("collection"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("update")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("query"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("updateObj"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n   {\n     upsert: "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("boolean")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n     multi: "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("boolean")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n   }\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h3",{attrs:{id:"_8-2-参数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-2-参数"}},[s._v("#")]),s._v(" 8.2 参数")]),s._v(" "),t("ul",[t("li",[s._v("query 查询条件,指定要更新符合哪些条件的文档")]),s._v(" "),t("li",[s._v("update 更新后的对象或指定一些更新的操作符")]),s._v(" "),t("li",[s._v("$set直接指定更新后的值")]),s._v(" "),t("li",[s._v("$inc在原基础上累加")]),s._v(" "),t("li",[s._v("upsert 可选，这个参数的意思是，如果不存在符合条件的记录时是否插入updateObj. 默认是false,不插入。")]),s._v(" "),t("li",[s._v("multi 可选，mongodb 默认只更新找到的第一条记录，如果这个参数为true,就更新所有符合条件的记录。")])]),s._v(" "),t("h3",{attrs:{id:"_8-3-upsert"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-3-upsert"}},[s._v("#")]),s._v(" 8.3 upsert")]),s._v(" "),t("p",[s._v("将students集合中数据中name是zfpx2的值修改为zfpx22")]),s._v(" "),t("blockquote",[t("p",[s._v('db.students.insert({_id:1,name:\'zfpx1\'});\nWriteResult({ "nInserted" : 1 })\ndb.students.update({_id:2},{name:\'zfpx2\'},{upsert:true});\nWriteResult({ "nMatched" : 0, "nUpserted" : 1, "nModified" : 0, "_id" : 2 })')])]),s._v(" "),t("h3",{attrs:{id:"_8-4-multi"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-4-multi"}},[s._v("#")]),s._v(" 8.4 multi")]),s._v(" "),t("ul",[t("li",[s._v("如果有多条name是zfpx2的数据只更新一条,如果想全部更新需要指定{multi:true}的参数")]),s._v(" "),t("li",[s._v("db.students.update({name:'zfpx2'},{$set:{age:10}},{multi:true});")]),s._v(" "),t("li",[s._v('WriteResult({ "nMatched" : 2, "nUpserted" : 0, "nModified" : 2 });')])]),s._v(" "),t("h2",{attrs:{id:"_9-更新操作符"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_9-更新操作符"}},[s._v("#")]),s._v(" 9. 更新操作符")]),s._v(" "),t("h3",{attrs:{id:"_9-1-set"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_9-1-set"}},[s._v("#")]),s._v(" 9.1 $set")]),s._v(" "),t("p",[s._v("直接指定更新后的值")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("c3"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("update")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("{name:"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'zfpx2'")]),s._v("}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("{$"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(":{age:"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("}}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("{multi:"),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"_9-2-inc"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_9-2-inc"}},[s._v("#")]),s._v(" 9.2 $inc")]),s._v(" "),t("p",[s._v("在原基础上累加")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("c3"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("update")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("{name:"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'zfpx2'")]),s._v("}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("{$inc:{age:"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("}}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("{multi:"),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"_9-3-unset"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_9-3-unset"}},[s._v("#")]),s._v(" 9.3 $unset")]),s._v(" "),t("p",[s._v("删除指定的键")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("c3"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("update")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("{name:"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'zfpx2'")]),s._v("}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("{$unset:{age:"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("}}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("{multi:"),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"_9-4-push"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_9-4-push"}},[s._v("#")]),s._v(" 9.4 $push")]),s._v(" "),t("p",[s._v("向数组中添加元素")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("var result "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("student"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("update")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("{name:"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'张三'")]),s._v("}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("{\n    $push:{"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hobbys"')]),s._v(":"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"smoking"')]),s._v("}\n}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h3",{attrs:{id:"_9-5-ne"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_9-5-ne"}},[s._v("#")]),s._v(" 9.5 $ne")]),s._v(" "),t("p",[s._v("$ne类似于MYSQL的 not in 或者not exists")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("student"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("update")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("{name:"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'zfpx1'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("hobbys:{$ne:"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'smoking'")]),s._v("}}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("{$push:{"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hobbys"')]),s._v(":"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"smoking"')]),s._v("}}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"_9-5-addtoset"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_9-5-addtoset"}},[s._v("#")]),s._v(" 9.5 $addToSet")]),s._v(" "),t("p",[s._v("向集合中添加元素")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("student"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("update")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("{name:"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'zfpx1'")]),s._v("}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("{$addToSet:{"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hobbys"')]),s._v(":"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"smoking"')]),s._v("}}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"_9-6-pull"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_9-6-pull"}},[s._v("#")]),s._v(" 9.6 $pull")]),s._v(" "),t("p",[s._v("向集合中删除元素")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("student"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("update")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("{name:"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'zfpx1'")]),s._v("}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("{$pull:{"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hobbys"')]),s._v(":"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"smoking"')]),s._v("}}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"_9-7-each"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_9-7-each"}},[s._v("#")]),s._v(" 9.7 $each")]),s._v(" "),t("p",[s._v("把数组中的元素逐个添加到集合中")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("var hobbys "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"A"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'B'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\ndb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("student"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("update")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("{name:"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'zfpx1'")]),s._v("}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("{$addToSet:{hobbys:{$each:hobbys}}}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"_9-8-pop"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_9-8-pop"}},[s._v("#")]),s._v(" 9.8 $pop")]),s._v(" "),t("p",[s._v("从数组中移除指定的索引中对应的元素")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("student"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("update")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("{name:"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'zfpx1'")]),s._v("}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("{$pop:{hobbys:"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("}}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"_9-9-修改指定索引元素"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_9-9-修改指定索引元素"}},[s._v("#")]),s._v(" 9.9 修改指定索引元素")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("c3"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("update")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("{name:"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'zfpx1'")]),s._v("}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("{$"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(":{"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hobbys.0"')]),s._v(":"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"smoking2"')]),s._v("}}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"_10-文档的删除"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_10-文档的删除"}},[s._v("#")]),s._v(" 10. 文档的删除")]),s._v(" "),t("p",[s._v("remove方法是用来移除集合中的数据")]),s._v(" "),t("h3",{attrs:{id:"_10-1-语法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_10-1-语法"}},[s._v("#")]),s._v(" 10.1 语法")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("collection"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("remove"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("query"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n   {\n     justOne: "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("boolean")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n   }\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h3",{attrs:{id:"_10-2-参数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_10-2-参数"}},[s._v("#")]),s._v(" 10.2 参数")]),s._v(" "),t("ul",[t("li",[s._v("query :（可选）删除的文档的条件。")]),s._v(" "),t("li",[s._v("justOne : （可选）如果设为 true 或 1，则只删除匹配到的多个文档中的第一个")])]),s._v(" "),t("h3",{attrs:{id:"_10-3-实例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_10-3-实例"}},[s._v("#")]),s._v(" 10.3 实例")]),s._v(" "),t("p",[s._v("删除worker集合里name是zfpx2的所有文档数据")]),s._v(" "),t("blockquote",[t("p",[s._v("db.students.remove({name:'zfpx2'});\nWriteResult({ \"nRemoved\" : 2 })\n即使匹配多条也只删除一条")])]),s._v(" "),t("blockquote",[t("p",[s._v('db.students.remove({name:"zfpx2"},{justOne:true})')])]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("WriteResult"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("{ "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nRemoved"')]),s._v(" : "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" }"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"_11-查询文档"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-查询文档"}},[s._v("#")]),s._v(" 11. 查询文档")]),s._v(" "),t("h3",{attrs:{id:"_11-1-find"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-1-find"}},[s._v("#")]),s._v(" 11.1 find")]),s._v(" "),t("p",[s._v("语法")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("collection_name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("find"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("参数")]),s._v(" "),t("p",[s._v("collection_name 集合的名字\n实例 查询students下所有的文档")]),s._v(" "),t("p",[s._v("db.students.find()")]),s._v(" "),t("h3",{attrs:{id:"_11-2-查询指定列"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-2-查询指定列"}},[s._v("#")]),s._v(" 11.2 查询指定列")]),s._v(" "),t("p",[s._v("语法")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("collection_name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("find"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("{queryWhere}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("{"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),s._v(":"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),s._v(":"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("参数列表")]),s._v(" "),t("p",[s._v("collection_name 集合的名字\nqueryWhere 参阅查询条件操作符\nkey 指定要返回的列\n1 表示要显示\n实例 只返回显示age列")]),s._v(" "),t("blockquote",[t("p",[s._v("db.students.find({},{age:1});")])]),s._v(" "),t("h3",{attrs:{id:"_11-3-findone"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-3-findone"}},[s._v("#")]),s._v(" 11.3 findOne")]),s._v(" "),t("p",[s._v("查询匹配结果的第一条数据 语法")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("collection_name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("findOne"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("实例")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("findOne"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"_11-4-in"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-4-in"}},[s._v("#")]),s._v(" 11.4 $in")]),s._v(" "),t("p",[s._v("查询字段在某个范围内")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("student"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("find"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("{age:{$"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(":"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("}}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("{name:"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("age:"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"_11-5-nin"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-5-nin"}},[s._v("#")]),s._v(" 11.5 $nin")]),s._v(" "),t("p",[s._v("查询字段不在某个范围内")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("student"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("find"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("{age:{$nin:"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("}}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("{name:"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("age:"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"_11-6-not"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-6-not"}},[s._v("#")]),s._v(" 11.6 $not")]),s._v(" "),t("p",[s._v("对特定条件取反")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("student"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("find"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("{age:{$"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("not")]),s._v(":{$gte:"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("$lte:"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v("}}}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"_11-7-array"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-7-array"}},[s._v("#")]),s._v(" 11.7 array")]),s._v(" "),t("p",[s._v("对数组的查询")]),s._v(" "),t("p",[s._v('//按所有元素匹配\n//let result = db.student.find({friends:[ "A", "B", "C", "D" ]});\n//匹配一项 包含A的就可以\n//let result = db.student.find({friends:"A"});\n//$all 必须同时包含A B\n//let result = db.student.find({friends:{$all:[\'A\',"B"]}});\n//$in 或者关系 ，包含A或者B\n//let result = db.student.find({friends:{$in:[\'A\',"B"]}});\n//$size 按数组的长度去匹配\n//let result = db.student.find({friends:{$size:4}});\n//$slice 只返回数组中的某一部分\n//let result = db.student.find({friends:{$size:5}},{name:1,friends:{$slice:2}});\n//let result = db.student.find({friends:{$size:5}},{name:1,friends:{$slice:-2}});\n$slice:["$array", [startIndex, ] length ] （startIndex可以省略，默认从0开始）\n"friends" : [ "A", "B" ] }   "friends" : [ "C", "D" ]\ndb.stu.find({},{friends:{$slice:[0,3]}});  "friends" : [ "A", "B", "C" ]')]),s._v(" "),t("h3",{attrs:{id:"_11-8-where"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-8-where"}},[s._v("#")]),s._v(" 11.8 where")]),s._v(" "),t("p",[s._v('db.student.find({$where:"this.age>30"},{name:1,age:1});')]),s._v(" "),t("h3",{attrs:{id:"_11-9-cursor"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-9-cursor"}},[s._v("#")]),s._v(" 11.9 cursor")]),s._v(" "),t("p",[s._v("游标不是查询结果，而是查询的一个返回资源或者接口，通过这个接口，可以逐条读取数据\nvar result = db.student.find();")]),s._v(" "),t("p",[s._v("//while(result.hasNext()){\n//    printjson(result.next());\n//}")]),s._v(" "),t("h2",{attrs:{id:"_12-条件操作符"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_12-条件操作符"}},[s._v("#")]),s._v(" 12. 条件操作符")]),s._v(" "),t("p",[s._v("条件操作符用于比较两个表达式并从mongoDB集合中获取数据")]),s._v(" "),t("h3",{attrs:{id:"_12-1-大于操作符"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_12-1-大于操作符"}},[s._v("#")]),s._v(" 12.1 大于操作符")]),s._v(" "),t("p",[s._v("语法")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("collectoin_name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("find"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("{"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(":{$gt:"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("value")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("}}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("参数")]),s._v(" "),t("p",[s._v("collectoin_name 集合名称\nkey 字段\nvalue 值\n查询 age 大于 30的数据")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("find"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("{age:{$gt:"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v("}}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"_12-2-大于等于操作符"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_12-2-大于等于操作符"}},[s._v("#")]),s._v(" 12.2 大于等于操作符")]),s._v(" "),t("p",[s._v("语法")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("collectoin_name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("find"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("{"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(":{$gte:"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("value")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("}}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("参数")]),s._v(" "),t("p",[s._v("collectoin_name 集合名称\nkey 字段\nvalue 值\n查询age 3大于等于30 的数据")]),s._v(" "),t("p",[s._v("db.students.find({age: {$gte: 30}})")]),s._v(" "),t("h3",{attrs:{id:"_12-3-小于操作符"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_12-3-小于操作符"}},[s._v("#")]),s._v(" 12.3 小于操作符")]),s._v(" "),t("p",[s._v("语法")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("collectoin_name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("find"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" {"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(":{$lt:"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("value")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("}}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("参数")]),s._v(" "),t("p",[s._v("collectoin_name集合名称\nkey 字段\nvalue 值\n实例")]),s._v(" "),t("p",[s._v("db.students.find({age: {$lt: 30}}) 查询age 小于30的数据")]),s._v(" "),t("h3",{attrs:{id:"_12-4-小于等于操作符"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_12-4-小于等于操作符"}},[s._v("#")]),s._v(" 12.4 小于等于操作符")]),s._v(" "),t("p",[s._v("语法")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("collectoin_name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("find"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("{"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(":{$lte:"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("value")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("}}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("参数")]),s._v(" "),t("p",[s._v("collectoin_name集合名词\nkey字段\nvalue值\n查询age 小于等于30的数据")]),s._v(" "),t("p",[s._v("db.students.find({age: {$lte: 30}})")]),s._v(" "),t("h3",{attrs:{id:"_12-5-同时使用-gte和-lte"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_12-5-同时使用-gte和-lte"}},[s._v("#")]),s._v(" 12.5 同时使用 $gte和$lte")]),s._v(" "),t("p",[s._v("语法")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("collectoin_name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("find"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("{"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(":{$gte:"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("value")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(":{$lte:"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("value")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("}}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("参数")]),s._v(" "),t("p",[s._v("collectoin_name 集合名称\nkey 字段\nvalue 值\n实例 查询age 大于等于 30 并且 age 小于等于 50 的数据")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("find"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("{age: {$gte: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" $lte: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),s._v("}}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"_12-6-等于"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_12-6-等于"}},[s._v("#")]),s._v(" 12.6 等于")]),s._v(" "),t("p",[s._v("语法")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("collectoin_name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("find"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("{"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(":"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("value")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(":"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("value")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("参数")]),s._v(" "),t("p",[s._v("collectoin_name集合名词\nkey字段\nvalue值\n查询age = 30的数据")]),s._v(" "),t("p",[s._v('db.students.find({"age": 30})`')]),s._v(" "),t("h3",{attrs:{id:"_12-7-使用-id进行查询"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_12-7-使用-id进行查询"}},[s._v("#")]),s._v(" 12.7 使用 _id进行查询")]),s._v(" "),t("p",[s._v("语法")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("collectoin_name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("find"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("{"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"_id"')]),s._v(" : ObjectId"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"value"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("参数")]),s._v(" "),t("p",[s._v("value _id的值\n实例 查询_id是 562af23062d5a57609133974 数据")]),s._v(" "),t("blockquote",[t("p",[s._v('db.students.find({_id:ObjectId("5adb666ecd738e9771638985")});')])]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("{ "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"_id"')]),s._v(" : ObjectId"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"5adb666ecd738e9771638985"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),s._v(" : "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"zzzz"')]),s._v(" }\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"_12-8-查询结果集的条数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_12-8-查询结果集的条数"}},[s._v("#")]),s._v(" 12.8 查询结果集的条数")]),s._v(" "),t("p",[s._v("语法")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("collectoin_name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("find"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("count")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("参数")]),s._v(" "),t("p",[s._v("collectoin_name 集合名称\n实例")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("find"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("count")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"_12-9-正则匹配"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_12-9-正则匹配"}},[s._v("#")]),s._v(" 12.9 正则匹配")]),s._v(" "),t("p",[s._v("语法")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("collection"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("find"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("{"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),s._v(":"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("value")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("参数")]),s._v(" "),t("p",[s._v("collectoin_name 集合名称\nkey 字段\nvalue 值\n实例 查询name里包含zhang的数据")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("find"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("{name:"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("value")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("查询某个字段的值当中是否以另一个值开头")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("find"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("{name:"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("^")]),s._v("zhang"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"_13-与和或"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_13-与和或"}},[s._v("#")]),s._v(" 13. 与和或")]),s._v(" "),t("h3",{attrs:{id:"_13-1-and"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_13-1-and"}},[s._v("#")]),s._v(" 13.1 and")]),s._v(" "),t("p",[s._v("find方法可以传入多个键(key)，每个键(key)以逗号隔开")]),s._v(" "),t("p",[s._v("语法")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("collection_name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("find"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("{key1:value1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" key2:value2}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("实例 查询name是zfpx并且age是1的数据")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("find"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("{name:"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'zfpx'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("age:"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"_13-2-or"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_13-2-or"}},[s._v("#")]),s._v(" 13.2 or")]),s._v(" "),t("p",[s._v("语法")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("collection_name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("find"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n   {\n      $"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("or")]),s._v(": "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n   {key1: value1}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" {key2:value2}\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n   }\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("实例 查询age = 30 或者 age = 50 的数据")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("find"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("{$"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("or")]),s._v(":"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("{age:"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v("}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("{age:"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),s._v("}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"_13-3-and和or联用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_13-3-and和or联用"}},[s._v("#")]),s._v(" 13.3 and和or联用")]),s._v(" "),t("p",[s._v("语法")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("collection_name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("find"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n   {\n     key1:value1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n     key2:value2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n     $"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("or")]),s._v(": "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n   {key1: value1}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n   {key2:value2}\n     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n   }\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("p",[s._v("实例 查询 name是zfpx 并且 age是30 或者 age是 50 的数据")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("find"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("{name:"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'zfpx'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("$"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("or")]),s._v(":"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("{age:"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v("}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("{age:"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),s._v("}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"_14-分页查询"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_14-分页查询"}},[s._v("#")]),s._v(" 14. 分页查询")]),s._v(" "),t("h3",{attrs:{id:"_14-1-limit"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_14-1-limit"}},[s._v("#")]),s._v(" 14.1 limit")]),s._v(" "),t("p",[s._v("读取指定数量的数据记录 语法")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("collectoin_name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("find"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("limit")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("number"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("参数")]),s._v(" "),t("p",[s._v("collectoin_name集合\nnumber读取的条数\n实例 查询前3条数据")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("find"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("limit")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"_14-2-skip"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_14-2-skip"}},[s._v("#")]),s._v(" 14.2 skip")]),s._v(" "),t("p",[s._v("跳过指定数量的数据，skip方法同样接受一个数字参数作为跳过的记录条数 语法")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("collectoin_name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("find"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("skip"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("number"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("参数")]),s._v(" "),t("p",[s._v("collectoin_name集合\nnumber跳过的条数\n实例 查询3条以后的数据")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("find"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("skip"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"_14-3-skip-limit"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_14-3-skip-limit"}},[s._v("#")]),s._v(" 14.3 skip+limit")]),s._v(" "),t("p",[s._v("通常用这种方式来实现分页功能 语法")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("collectoin_name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("find"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("skip"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("skipNum"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("limit")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("limitNum"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("参数")]),s._v(" "),t("p",[s._v("collectoin_name 集合名称\nskipNum 跳过的条数\nlimitNum 限制返回的条数\n实例 查询在4-6之间的数据")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("find"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("skip"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("limit")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"_14-4-sort排序"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_14-4-sort排序"}},[s._v("#")]),s._v(" 14.4 sort排序")]),s._v(" "),t("p",[s._v("sort()方法可以通过参数指定排序的字段，并使用 1 和 -1 来指定排序的方式，其中 1 为升序排列，而-1是用于降序排列。 语法")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("collectoin_name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("find"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sort"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("{"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),s._v(":"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\ndb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("collectoin_name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("find"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sort"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("{"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),s._v(":"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("参数")]),s._v(" "),t("p",[s._v("collectoin_name集合\nkey表示字段\n实例 查询出并升序排序 {age:1} age表示按那个字段排序 1表示升序")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("find"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sort"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("{age:"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"_15-执行脚本"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_15-执行脚本"}},[s._v("#")]),s._v(" 15. 执行脚本")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" username "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'zfpx'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" password "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'123456'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" user "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v('"username"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" username"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v('"password"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" password "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" db "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("connect")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'students'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//选择users数据库")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" result "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("users"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("insert")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("print")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'write '")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" result"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" start "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Date"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("now")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" db "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("connect")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'students'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" i "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" i "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" i"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("++")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("users"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("insert")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v('"username"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"zfpx"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" i "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" cost "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Date"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("now")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" start"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("print")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'cost '")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" cost "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("' ms'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" start "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Date"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("now")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" db "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("connect")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'students'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" users "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" i "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" i "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" i"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("++")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    users"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("push")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v('"username"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"zfpx"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" i "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\ndb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("users"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("insert")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("users"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" cost "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Date"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("now")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" start"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("print")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'cost '")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" cost "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("' ms'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br")])]),t("p",[s._v("在命令行中执行")]),s._v(" "),t("p",[s._v('script>mongo 1.js\nMongoDB shell version: 2.6.7\nconnecting to: test\nconnecting to: students\nwrite WriteResult({ "nInserted" : 1 })')]),s._v(" "),t("h2",{attrs:{id:"_16-备份与导出"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_16-备份与导出"}},[s._v("#")]),s._v(" 16. 备份与导出")]),s._v(" "),t("p",[s._v("mongodump\n-- host 127.0.0.1\n-- port 27017\n-- out D:/databack/backup\n-- collection mycollection\n-- db test\n-- username\n-- password\n//mongodump --host 127.0.0.1 --port 27017 --out ./backup --collection users --db students\n//db.users.drop();")]),s._v(" "),t("p",[s._v("mongorestore\n--host\n--port\n--username\n--password")]),s._v(" "),t("p",[s._v("// mongorestore --host 127.0.0.1 --port 27017 ./backup")]),s._v(" "),t("h2",{attrs:{id:"_17-权限"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_17-权限"}},[s._v("#")]),s._v(" 17. 权限")]),s._v(" "),t("h3",{attrs:{id:"_17-1-创建用户"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_17-1-创建用户"}},[s._v("#")]),s._v(" 17.1 创建用户")]),s._v(" "),t("p",[s._v("使用use admin进入我们的admin库\n使用db.createUser方法来创建集合")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("createUser"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("{\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(":"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'zfpx'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    pwd:"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'123456'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    customData:{\n        name:"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'zhufengpeixun'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        email:"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'zhufengpeixun@126.com'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        age:"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v("\n    }"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    roles:"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n        {\n          role:"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'readWrite'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n          db:"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'school'")]),s._v("\n        }"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'read'")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br")])]),t("h3",{attrs:{id:"_17-2-查询用户"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_17-2-查询用户"}},[s._v("#")]),s._v(" 17.2 查询用户")]),s._v(" "),t("p",[s._v("db.system.users.find();")]),s._v(" "),t("h3",{attrs:{id:"_17-3-删除用户"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_17-3-删除用户"}},[s._v("#")]),s._v(" 17.3 删除用户")]),s._v(" "),t("p",[s._v("db.system.users.remove({user:'zfpx'});")]),s._v(" "),t("h3",{attrs:{id:"_17-4-启动数据库权限检查"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_17-4-启动数据库权限检查"}},[s._v("#")]),s._v(" 17.4 启动数据库权限检查")]),s._v(" "),t("p",[s._v("mongod --auth\nmongo  -u zfpx -p 123456 127.0.0.1:27017/admin")]),s._v(" "),t("h3",{attrs:{id:"_17-5-鉴权"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_17-5-鉴权"}},[s._v("#")]),s._v(" 17.5 鉴权")]),s._v(" "),t("p",[s._v("use admin;\ndb.auth('zfpx','zfpx');\n正确返回1，如果错误返回0")]),s._v(" "),t("h2",{attrs:{id:"_18-索引"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_18-索引"}},[s._v("#")]),s._v(" 18. 索引")]),s._v(" "),t("h3",{attrs:{id:"_18-1-准备数据"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_18-1-准备数据"}},[s._v("#")]),s._v(" 18.1 准备数据")]),s._v(" "),t("p",[s._v("var db = connect('school');//选择users数据库\nvar users = [];\nfor(var i=0;i<20;i++){\nusers.push({_id:i,name:'zfpx'+i});\n}\nprint(users.length);\ndb.users.insert(users);")]),s._v(" "),t("h3",{attrs:{id:"_18-2-打印出查询时间"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_18-2-打印出查询时间"}},[s._v("#")]),s._v(" 18.2 打印出查询时间")]),s._v(" "),t("p",[s._v("var startTime = Date.now();\nvar  db = connect('school');"),t("br"),s._v('\nvar  records=db.users.find({name:"zfpx100"});\nrecords.forEach(function(item){printjson(item)});\nprint(Date.now() - startTime);')]),s._v(" "),t("h3",{attrs:{id:"_18-3-建立索引"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_18-3-建立索引"}},[s._v("#")]),s._v(" 18.3 建立索引")]),s._v(" "),t("p",[s._v("db.users.ensureIndex({name:1});")]),s._v(" "),t("h2",{attrs:{id:"_19-附录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_19-附录"}},[s._v("#")]),s._v(" 19. 附录")]),s._v(" "),t("h3",{attrs:{id:"_19-1-objectid构成"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_19-1-objectid构成"}},[s._v("#")]),s._v(" 19.1 ObjectId构成")]),s._v(" "),t("p",[s._v("之前我们使用MySQL等关系型数据库时，主键都是设置成自增的。但在分布式环境下，这种方法就不可行了，会产生冲突。为此，MongoDB采用了一个称之为ObjectId的类型来做主键。ObjectId是一个12字节的 BSON 类型字符串。按照字节顺序，一次代表：")]),s._v(" "),t("p",[s._v("4字节：UNIX时间戳\n3字节：表示运行MongoDB的机器\n2字节：表示生成此_id的进程\n3字节：由一个随机数开始的计数器生成的值")]),s._v(" "),t("h3",{attrs:{id:"_19-2-mongodb启动命令mongod参数说明"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_19-2-mongodb启动命令mongod参数说明"}},[s._v("#")]),s._v(" 19.2 Mongodb启动命令mongod参数说明")]),s._v(" "),t("p",[s._v("选项\t含义\n--port\t指定服务端口号，默认端口27017\n--logpath\t指定MongoDB日志文件，注意是指定文件不是目录\n--logappend\t使用追加的方式写日志\n--dbpath\t指定数据库路径\n--directoryperdb\t设置每个数据库将被保存在一个单独的目录")]),s._v(" "),t("h3",{attrs:{id:"_19-3-集合命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_19-3-集合命令"}},[s._v("#")]),s._v(" 19.3 集合命令")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("help"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nDBCollection help\ndb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("find"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("help"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("show")]),s._v(" DBCursor help 显示游标帮助\ndb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("count")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" 显示条数\ndb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("copyTo"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("newColl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" duplicates collection "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" copying "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("all")]),s._v(" docum ents "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("to")]),s._v(" newColl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("no")]),s._v(" indexes are copied"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" 把一个旧集合拷贝到一个新的集合，不拷贝索引\ndb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("convertToCapped"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("maxBytes"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" calls {convertToCapped:"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'students '")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" size:maxBytes}} command\ndb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dataSize"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" 数据大小\ndb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("distinct")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" e"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("g"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("distinct")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'x'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" 统计唯一的"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),s._v("的数量\ndb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("drop")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("drop")]),s._v(" the collection ，删除集合\ndb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dropIndex"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" e"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("g"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dropIndex"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"indexName"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" 删除索引 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("or")]),s._v(" db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dropIndex"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" { "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"indexKey"')]),s._v(" : "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" } "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\ndb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dropIndexes"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" 删除 所有的索引\ndb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ensureIndex"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("keypattern"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("options"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" options "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("is")]),s._v(" an object wit h these possible "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fields")]),s._v(": name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("unique")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" dropDups 添加索引\ndb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("reIndex"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\ndb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("find"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("query"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fields")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" query "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("is")]),s._v(" an optional query filter"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fields")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("is")]),s._v(" optional "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("of")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fields")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("to")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" 查找文档\n     e"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("g"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("find"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" {x:\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("77")]),s._v("} "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" {name:"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" x:"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("} "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\ndb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("find"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("count")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" 数量\ndb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("find"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("limit")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" 限制返回的条数\ndb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("find"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("skip"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" 设置跳过的条数\ndb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("find"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sort"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" 排序\ndb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("findOne"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("query"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" 查找一条\ndb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("findAndModify"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" { "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("update")]),s._v(" : "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" remove : "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("bool")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" query: {}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" sort: {}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'new'")]),s._v(": "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" } "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" 查找并且修改 更新后的值，是否删除，查询条件 排序 是否返回新值\ndb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("getDB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" get DB object associated "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("with")]),s._v(" collection 获得DB\ndb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("getPlanCache"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" get query "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("plan")]),s._v(" cache associated "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("with")]),s._v(" collecti "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v("\ndb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("getIndexes"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" 获取索引\ndb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("group")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" { "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),s._v(" : "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" initial: "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" reduce : "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" cond: "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" } "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" 分组统计\ndb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("obj"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" 插入文档\ndb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("mapReduce"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" mapFunction "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" reduceFunction "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" 统计\ndb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("aggregate"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("pipeline"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" performs an agg regation "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" a collection"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("returns")]),s._v(" a "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("cursor")]),s._v(" 聚合\ndb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("remove"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("query"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" 删除\ndb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("renameCollection"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" newName "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" renames the colle ction"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" 重命名集合\ndb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("runCommand"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" name "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" runs a db command "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("with")]),s._v(" the gi ven name "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" the "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("first")]),s._v(" param "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("is")]),s._v(" the collection name\ndb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("save")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("obj"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" 保存对象\ndb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("stats"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" 统计信息\ndb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("storageSize"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" includes free space allocated "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("to")]),s._v(" this collec tion\ndb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("totalIndexSize"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" size "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" bytes "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("of")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("all")]),s._v(" the indexes\ndb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("totalSize"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" storage allocated "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("all")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("data")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v(" indexes\ndb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("update")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("query"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" object"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" upsert_bool"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" multi_bool"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" instead o f two flags"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" you can pass an object "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("with")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fields")]),s._v(": upsert"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" multi 更新\ndb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("validate"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" SLOW\ndb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("getShardVersion"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" only "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("use")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("with")]),s._v(" sharding\ndb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("getShardDistribution"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" prints "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("statistics")]),s._v(" about "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("data")]),s._v(" distri bution "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" the cluster\ndb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("getSplitKeysForChunks"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" calculates split p oints "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("over")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("all")]),s._v(" chunks "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("returns")]),s._v(" splitter "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v("\ndb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("getWriteConcern"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("returns")]),s._v(" the "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("write")]),s._v(" concern used "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("any")]),s._v(" o perations "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" this collection"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" inherited "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" server"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("db "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v("\ndb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("setWriteConcern"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" sets the "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("write")]),s._v(" conc ern "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" writes "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("to")]),s._v(" the collection\ndb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("students"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("unsetWriteConcern"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" unsets the "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("write")]),s._v(" concern "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" writes "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("to")]),s._v(" the collection\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br")])]),t("h2",{attrs:{id:"_20-用户和权限"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_20-用户和权限"}},[s._v("#")]),s._v(" 20. 用户和权限")]),s._v(" "),t("h3",{attrs:{id:"_20-1-角色"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_20-1-角色"}},[s._v("#")]),s._v(" 20.1 角色")]),s._v(" "),t("h4",{attrs:{id:"_20-1-1-数据库用户角色"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_20-1-1-数据库用户角色"}},[s._v("#")]),s._v(" 20.1.1 数据库用户角色")]),s._v(" "),t("p",[s._v("针对每一个数据库进行控制。")]),s._v(" "),t("ul",[t("li",[s._v("read :提供了读取所有非系统集合，以及系统集合中的system.indexes, system.js, system.namespaces")]),s._v(" "),t("li",[s._v("readWrite: 包含了所有read权限，以及修改所有非系统集合的和系统集合中的system.js的权限")])]),s._v(" "),t("h4",{attrs:{id:"_20-1-2-数据库管理角色"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_20-1-2-数据库管理角色"}},[s._v("#")]),s._v(" 20.1.2 数据库管理角色")]),s._v(" "),t("p",[s._v("每一个数据库包含了下面的数据库管理角色。")]),s._v(" "),t("ul",[t("li",[s._v("dbOwner：该数据库的所有者，具有该数据库的全部权限。")]),s._v(" "),t("li",[s._v("dbAdmin：一些数据库对象的管理操作，但是没有数据库的读写权限。（参考：http://docs.mongodb.org/manual/reference/built-in-roles/#dbAdmin）")]),s._v(" "),t("li",[s._v("userAdmin：为当前用户创建、修改用户和角色。拥有userAdmin权限的用户可以将该数据库的任意权限赋予任意的用户。")])]),s._v(" "),t("h4",{attrs:{id:"_20-1-3-集群管理权限"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_20-1-3-集群管理权限"}},[s._v("#")]),s._v(" 20.1.3 集群管理权限")]),s._v(" "),t("ul",[t("li",[s._v("admin数据库包含了下面的角色，用户管理整个系统，而非单个数据库。这些权限包含了复制集和共享集群的管理函数。")]),s._v(" "),t("li",[s._v("clusterAdmin：提供了最大的集群管理功能。相当于clusterManager, clusterMonitor, and hostManager和dropDatabase的权限组合。")]),s._v(" "),t("li",[s._v("clusterManager：提供了集群和复制集管理和监控操作。拥有该权限的用户可以操作config和local数据库（即分片和复制功能）")]),s._v(" "),t("li",[s._v("clusterMonitor：仅仅监控集群和复制集。")]),s._v(" "),t("li",[s._v("hostManager：提供了监控和管理服务器的权限，包括shutdown节点，logrotate, repairDatabase等。 备份恢复权限：admin数据库中包含了备份恢复数据的角色。包括backup、restore等等。")])]),s._v(" "),t("h4",{attrs:{id:"_20-1-4-所有数据库角色"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_20-1-4-所有数据库角色"}},[s._v("#")]),s._v(" 20.1.4 所有数据库角色")]),s._v(" "),t("ul",[t("li",[s._v("admin数据库提供了一个mongod实例中所有数据库的权限角色：")]),s._v(" "),t("li",[s._v("readAnyDatabase：具有read每一个数据库权限。但是不包括应用到集群中的数据库。")]),s._v(" "),t("li",[s._v("readWriteAnyDatabase：具有readWrite每一个数据库权限。但是不包括应用到集群中的数据库。")]),s._v(" "),t("li",[s._v("userAdminAnyDatabase：具有userAdmin每一个数据库权限，但是不包括应用到集群中的数据库。")]),s._v(" "),t("li",[s._v("dbAdminAnyDatabase：提供了dbAdmin每一个数据库权限，但是不包括应用到集群中的数据库。")])]),s._v(" "),t("h4",{attrs:{id:"_20-1-5-超级管理员权限"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_20-1-5-超级管理员权限"}},[s._v("#")]),s._v(" 20.1.5 超级管理员权限")]),s._v(" "),t("p",[s._v("root: dbadmin到admin数据库、useradmin到admin数据库以及UserAdminAnyDatabase。但它不具有备份恢复、直接操作system.*集合的权限，但是拥有root权限的超级用户可以自己给自己赋予这些权限。")]),s._v(" "),t("h4",{attrs:{id:"_20-1-6-备份恢复角色"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_20-1-6-备份恢复角色"}},[s._v("#")]),s._v(" 20.1.6 备份恢复角色")]),s._v(" "),t("p",[s._v("backup、restore；")]),s._v(" "),t("h4",{attrs:{id:"_20-1-7-内部角色"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_20-1-7-内部角色"}},[s._v("#")]),s._v(" 20.1.7 内部角色")]),s._v(" "),t("p",[s._v("__system")]),s._v(" "),t("h3",{attrs:{id:"_20-2-权限配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_20-2-权限配置"}},[s._v("#")]),s._v(" 20.2 权限配置")]),s._v(" "),t("ul",[t("li",[s._v("数据库用户角色 read readWrite")]),s._v(" "),t("li",[s._v("数据库管理角色 dbAdmin dbOwner userAdmin")]),s._v(" "),t("li",[s._v("集群管理角色 clusterAdmin clusterManager clusterMonitor hostManager")]),s._v(" "),t("li",[s._v("备份恢复角色 backup restore")]),s._v(" "),t("li",[s._v("所有数据库角色 readAnyDatabase readWriteAnyDatabase userAdminAnyDatabase dbAdminAnyDatabase")]),s._v(" "),t("li",[s._v("超级用户角色 root")])]),s._v(" "),t("p",[s._v("mongod.conf 配置文件")]),s._v(" "),t("h4",{attrs:{id:"_20-2-1-常见命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_20-2-1-常见命令"}},[s._v("#")]),s._v(" 20.2.1 常见命令")]),s._v(" "),t("p",[s._v("ps -ef | grep mongo //查看当前进程\n/usr/bin/mongod -f /etc/mongod.conf //寻找配置文件\nsystemctl restart mongod.service //重启mongodb")]),s._v(" "),t("h4",{attrs:{id:"_20-2-2-创建超级管理员"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_20-2-2-创建超级管理员"}},[s._v("#")]),s._v(" 20.2.2 创建超级管理员")]),s._v(" "),t("p",[s._v("show users //显示所有用户")]),s._v(" "),t("h4",{attrs:{id:"_20-2-3-创建用户"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_20-2-3-创建用户"}},[s._v("#")]),s._v(" 20.2.3 创建用户")]),s._v(" "),t("p",[s._v("use admin")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("createUser"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("{\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(":"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'admin'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  pwd:"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'123456'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  roles:"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("{role:"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("db:"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'admin'")]),s._v("}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h4",{attrs:{id:"_20-2-4-管理员登录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_20-2-4-管理员登录"}},[s._v("#")]),s._v(" 20.2.4 管理员登录")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("mongo admin -u admin -p "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("123456")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h4",{attrs:{id:"_20-2-5-给每个库创创建一个自己的管理员"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_20-2-5-给每个库创创建一个自己的管理员"}},[s._v("#")]),s._v(" 20.2.5 给每个库创创建一个自己的管理员")]),s._v(" "),t("p",[s._v("use question;")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("createUser"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("{\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(":"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'questionadmin'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  pwd:"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'123456'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  roles:"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("{role:"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'dbOwner'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("db:"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'question'")]),s._v("}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h4",{attrs:{id:"_20-2-6-删除用户"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_20-2-6-删除用户"}},[s._v("#")]),s._v(" 20.2.6 删除用户")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dropUser"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"admin"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 删除某个用户,接受字符串参数")]),s._v("\ndb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dropAllUser"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 删除当前库的所有用户")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h4",{attrs:{id:"_20-2-7-更新用户"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_20-2-7-更新用户"}},[s._v("#")]),s._v(" 20.2.7 更新用户")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("updateUser"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'admin'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("{pwd:"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'password'")]),s._v("}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h4",{attrs:{id:"_20-2-8-密码认证"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_20-2-8-密码认证"}},[s._v("#")]),s._v(" 20.2.8 密码认证")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("auth"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'admin'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'password'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])])}),[],!1,null,null,null);t.default=e.exports}}]);