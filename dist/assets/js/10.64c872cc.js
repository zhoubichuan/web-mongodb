(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{490:function(t,s,a){"use strict";a.r(s);var n=a(20),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"基础知识"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#基础知识"}},[t._v("#")]),t._v(" 基础知识")]),t._v(" "),a("h2",{attrs:{id:"_1-什么是mongodb"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-什么是mongodb"}},[t._v("#")]),t._v(" 1. 什么是MongoDB")]),t._v(" "),a("ul",[a("li",[t._v("MongoDB是一个基于分布式文件存储的开源数据库系统")]),t._v(" "),a("li",[t._v("MongoDB 将数据存储为一个文档，数据结构由键值(key=>value)对组成。MongoDB 文档类似于 JSON 对象。字段值可以包含其他文档，数组及文档数组。")])]),t._v(" "),a("h2",{attrs:{id:"_2-mongodb安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-mongodb安装"}},[t._v("#")]),t._v(" 2. MongoDB安装")]),t._v(" "),a("h3",{attrs:{id:"_2-1-windows安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-windows安装"}},[t._v("#")]),t._v(" 2.1 windows安装")]),t._v(" "),a("p",[t._v("Windows官方安装指南")]),t._v(" "),a("p",[t._v("mongodb32位安装版 链接: https://pan.baidu.com/s/1SHJ1vre_CQOE3u-W0zniqQ 密码: chan")]),t._v(" "),a("p",[t._v("MongoDB64位绿色版 链接: https://pan.baidu.com/s/1EkAB2SrcU1mfMfff_WDxtA 密码: w913")]),t._v(" "),a("p",[t._v("mongo客户端 链接: https://pan.baidu.com/s/1YFxLZ-55D-WFR8os2fXN0A 密码: 61qd")]),t._v(" "),a("h3",{attrs:{id:"_2-2-mac安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-mac安装"}},[t._v("#")]),t._v(" 2.2 mac安装")]),t._v(" "),a("p",[t._v("Mac官方安装指南")]),t._v(" "),a("p",[t._v("先安装homebrew")]),t._v(" "),a("p",[t._v("http://brew.sh/\n使用brew安装mongodb")]),t._v(" "),a("p",[t._v("brew install mongodb\n再安装可视化工具 Robomongo")]),t._v(" "),a("h2",{attrs:{id:"_3-mongodb启动与连接"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-mongodb启动与连接"}},[t._v("#")]),t._v(" 3. mongodb启动与连接")]),t._v(" "),a("h3",{attrs:{id:"_3-1-windows启动服务器端"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-windows启动服务器端"}},[t._v("#")]),t._v(" 3.1 windows启动服务器端")]),t._v(" "),a("p",[t._v("找到mongodb安装目录,一般是 C:\\Program Files\\MongoDB 2.6 Standard\\bin\n按下Shift+鼠标右键,选择在此处打开命令窗口\n在除C盘外的盘符新建一个空目录,如 D:\\Mongodb\\data\n在命令行中输入mongod --dbpath=刚创建的空目录,如\nmongod --dbpath=D:\\Mongodb\\data\n再按回车键")]),t._v(" "),a("p",[t._v("如果出现waiting for connections on port 27017就表示启动成功,已经在27017端口上监听了客户端的请求\n注意：--dbpath后的值表示数据库文件的存储路径,而且后面的路径必须事先创建好，必须已经存在，否则服务开启失败\n注意：这个命令窗体绝对不能关,关闭这个窗口就相当于停止了mongodb服务\n4. 添加到window服务")]),t._v(" "),a("p",[t._v("以管理员身份运行命令\nlogfile是一个不存在的文件名，而非目录名\nmongod.exe --logpath C:\\program1\\MongoDB\\bin\\log\\logfile --logappend --dbpath C:\\program1\\MongoDB\\bin\\data --serviceName MongoDB --install")]),t._v(" "),a("h2",{attrs:{id:"_4-mongodb基本概念"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-mongodb基本概念"}},[t._v("#")]),t._v(" 4. MongoDB基本概念")]),t._v(" "),a("p",[t._v("数据库 MongoDB的单个实例可以容纳多个独立的数据库，比如一个学生管理系统就可以对应一个数据库实例\n集合 数据库是由集合组成的,一个集合用来表示一个实体,如学生集合\n文档 集合是由文档组成的，一个文档表示一条记录,比如一位同学张三就是一个文档\nmongostat")]),t._v(" "),a("h2",{attrs:{id:"_5-数据库操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-数据库操作"}},[t._v("#")]),t._v(" 5. 数据库操作")]),t._v(" "),a("h3",{attrs:{id:"_5-1-使用数据库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-使用数据库"}},[t._v("#")]),t._v(" 5.1 使用数据库")]),t._v(" "),a("p",[t._v("语法")]),t._v(" "),a("p",[t._v("use database_name"),a("br"),t._v("\ndatabase_name 代表数据库的名字\n注：如果此数据库存在，则切换到此数据库下,如果此数据库还不存在也可以切过来,但是并不能立刻创建数据库\n切换到 school数据库下")]),t._v(" "),a("p",[t._v("use school")]),t._v(" "),a("h3",{attrs:{id:"_5-2-查看所有数据库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-查看所有数据库"}},[t._v("#")]),t._v(" 5.2 查看所有数据库")]),t._v(" "),a("p",[t._v("语法")]),t._v(" "),a("p",[t._v("show dbs\n备注: 我们刚创建的数据库school如果不在列表内， 要显示它，我们需要向school数据库插入一些数据\ndb.students.insert({name:'zfpx',age:1});")]),t._v(" "),a("h3",{attrs:{id:"_5-3-查看当前使用的数据库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-查看当前使用的数据库"}},[t._v("#")]),t._v(" 5.3 查看当前使用的数据库")]),t._v(" "),a("p",[t._v("语法")]),t._v(" "),a("p",[t._v("db\n注：db代表的是当前数据库 也就是school这个数据库")]),t._v(" "),a("h3",{attrs:{id:"_5-4-删除数据库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-4-删除数据库"}},[t._v("#")]),t._v(" 5.4 删除数据库")]),t._v(" "),a("p",[t._v("语法")]),t._v(" "),a("p",[t._v("db.dropDatabase()")]),t._v(" "),a("h2",{attrs:{id:"_6-集合操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-集合操作"}},[t._v("#")]),t._v(" 6. 集合操作")]),t._v(" "),a("h3",{attrs:{id:"_6-1-查看集合帮助"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-查看集合帮助"}},[t._v("#")]),t._v(" 6.1 查看集合帮助")]),t._v(" "),a("p",[t._v("语法")]),t._v(" "),a("p",[t._v("db.students.help();")]),t._v(" "),a("h3",{attrs:{id:"_6-2-查看数据库下的集合"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-2-查看数据库下的集合"}},[t._v("#")]),t._v(" 6.2 查看数据库下的集合")]),t._v(" "),a("p",[t._v("show collections")]),t._v(" "),a("h3",{attrs:{id:"_6-3-创建集合"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-3-创建集合"}},[t._v("#")]),t._v(" 6.3 创建集合")]),t._v(" "),a("h4",{attrs:{id:"_6-3-1-创建一个空集合"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-3-1-创建一个空集合"}},[t._v("#")]),t._v(" 6.3.1 创建一个空集合")]),t._v(" "),a("p",[t._v("db.createCollection(collection_Name)"),a("br"),t._v("\ncollection_Name集合的名称")]),t._v(" "),a("h4",{attrs:{id:"_6-3-2-创建集合并插入一个文档"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-3-2-创建集合并插入一个文档"}},[t._v("#")]),t._v(" 6.3.2 创建集合并插入一个文档")]),t._v(" "),a("p",[t._v("collection_Name集合的名称\ndocument要插入的文档\ndb.collection_Name.insert(document)")]),t._v(" "),a("h2",{attrs:{id:"_7-插入文档"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-插入文档"}},[t._v("#")]),t._v(" 7. 插入文档")]),t._v(" "),a("h3",{attrs:{id:"_7-1-insert"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-1-insert"}},[t._v("#")]),t._v(" 7.1 insert")]),t._v(" "),a("p",[t._v("db.collection_name.insert(document);\n`\ncollection_name 集合的名字\ndocument 插入的文档\n每当插入一条新文档的时候mongodb会自动为此文档生成一个_id属性,_id一定是唯一的，用来唯一标识一个文档 _id也可以直接指定，但如果数据库中此集合下已经有此_id的话插入会失败\ndb.students.insert({_id:1,name:'zfpx',age:1});\nWriteResult({ \"nInserted\" : 1 })\ndb.students.insert({_id:1,name:'zfpx',age:1});")]),t._v(" "),a("h3",{attrs:{id:"_7-2-save"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-2-save"}},[t._v("#")]),t._v(" 7.2 save")]),t._v(" "),a("p",[t._v("db.collection_name.save(document)\ncollection_name 集合的名字\ndocument 插入的文档\n注：如果不指定 _id 字段 save() 方法类似于 insert() 方法。如果指定 _id 字段，则会更新该 _id 的数据。")]),t._v(" "),a("blockquote",[a("p",[t._v('db.students.save({_id:1,name:\'zfpx\',age:1});\nWriteResult({ "nMatched" : 1, "nUpserted" : 0, "nModified" : 0 })\ndb.students.save({_id:1,name:\'zfpx\',age:100});\nWriteResult({ "nMatched" : 1, "nUpserted" : 0, "nModified" : 1 })')])]),t._v(" "),a("h2",{attrs:{id:"_8-更新文档"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-更新文档"}},[t._v("#")]),t._v(" 8. 更新文档")]),t._v(" "),a("h3",{attrs:{id:"_8-1-语法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-1-语法"}},[t._v("#")]),t._v(" 8.1 语法")]),t._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("collection"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("update")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("query"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("updateObj"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n   {\n     upsert: "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n     multi: "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n   }\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br")])]),a("h3",{attrs:{id:"_8-2-参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-2-参数"}},[t._v("#")]),t._v(" 8.2 参数")]),t._v(" "),a("p",[t._v("query 查询条件,指定要更新符合哪些条件的文档\nupdate 更新后的对象或指定一些更新的操作符\n$set直接指定更新后的值\n$inc在原基础上累加\nupsert 可选，这个参数的意思是，如果不存在符合条件的记录时是否插入updateObj. 默认是false,不插入。\nmulti 可选，mongodb 默认只更新找到的第一条记录，如果这个参数为true,就更新所有符合条件的记录。")]),t._v(" "),a("h3",{attrs:{id:"_8-3-upsert"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-3-upsert"}},[t._v("#")]),t._v(" 8.3 upsert")]),t._v(" "),a("p",[t._v("将students集合中数据中name是zfpx2的值修改为zfpx22")]),t._v(" "),a("blockquote",[a("p",[t._v('db.students.insert({_id:1,name:\'zfpx1\'});\nWriteResult({ "nInserted" : 1 })\ndb.students.update({_id:2},{name:\'zfpx2\'},{upsert:true});\nWriteResult({ "nMatched" : 0, "nUpserted" : 1, "nModified" : 0, "_id" : 2 })')])]),t._v(" "),a("h3",{attrs:{id:"_8-4-multi"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-4-multi"}},[t._v("#")]),t._v(" 8.4 multi")]),t._v(" "),a("p",[t._v('如果有多条name是zfpx2的数据只更新一条,如果想全部更新需要指定{multi:true}的参数\ndb.students.update({name:\'zfpx2\'},{$set:{age:10}},{multi:true});\nWriteResult({ "nMatched" : 2, "nUpserted" : 0, "nModified" : 2 });')]),t._v(" "),a("h2",{attrs:{id:"_9-更新操作符"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_9-更新操作符"}},[t._v("#")]),t._v(" 9. 更新操作符")]),t._v(" "),a("h3",{attrs:{id:"_9-1-set"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_9-1-set"}},[t._v("#")]),t._v(" 9.1 $set")]),t._v(" "),a("p",[t._v("直接指定更新后的值")]),t._v(" "),a("p",[t._v("db.c3.update({name:'zfpx2'},{$set:{age:10}},{multi:true});")]),t._v(" "),a("h3",{attrs:{id:"_9-2-inc"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_9-2-inc"}},[t._v("#")]),t._v(" 9.2 $inc")]),t._v(" "),a("p",[t._v("在原基础上累加")]),t._v(" "),a("p",[t._v("db.c3.update({name:'zfpx2'},{$inc:{age:1}},{multi:true});")]),t._v(" "),a("h3",{attrs:{id:"_9-3-unset"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_9-3-unset"}},[t._v("#")]),t._v(" 9.3 $unset")]),t._v(" "),a("p",[t._v("删除指定的键")]),t._v(" "),a("p",[t._v("db.c3.update({name:'zfpx2'},{$unset:{age:1}},{multi:true});")]),t._v(" "),a("h3",{attrs:{id:"_9-4-push"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_9-4-push"}},[t._v("#")]),t._v(" 9.4 $push")]),t._v(" "),a("p",[t._v("向数组中添加元素")]),t._v(" "),a("p",[t._v('var result = db.student.update({name:\'张三\'},{\n$push:{"hobbys":"smoking"}\n});')]),t._v(" "),a("h3",{attrs:{id:"_9-5-ne"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_9-5-ne"}},[t._v("#")]),t._v(" 9.5 $ne")]),t._v(" "),a("p",[t._v("$ne类似于MYSQL的 not in 或者not exists")]),t._v(" "),a("p",[t._v("db.student.update({name:'zfpx1',hobbys:{$ne:'smoking'}},{$push:{\"hobbys\":\"smoking\"}});")]),t._v(" "),a("h3",{attrs:{id:"_9-5-addtoset"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_9-5-addtoset"}},[t._v("#")]),t._v(" 9.5 $addToSet")]),t._v(" "),a("p",[t._v("向集合中添加元素")]),t._v(" "),a("p",[t._v('db.student.update({name:\'zfpx1\'},{$addToSet:{"hobbys":"smoking"}});')]),t._v(" "),a("h3",{attrs:{id:"_9-6-pull"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_9-6-pull"}},[t._v("#")]),t._v(" 9.6 $pull")]),t._v(" "),a("p",[t._v('向集合中删除元素\ndb.student.update({name:\'zfpx1\'},{$pull:{"hobbys":"smoking"}});')]),t._v(" "),a("h3",{attrs:{id:"_9-7-each"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_9-7-each"}},[t._v("#")]),t._v(" 9.7 $each")]),t._v(" "),a("p",[t._v("把数组中的元素逐个添加到集合中")]),t._v(" "),a("p",[t._v("var hobbys = [\"A\",'B'];\ndb.student.update({name:'zfpx1'},{$addToSet:{hobbys:{$each:hobbys}}});")]),t._v(" "),a("h3",{attrs:{id:"_9-8-pop"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_9-8-pop"}},[t._v("#")]),t._v(" 9.8 $pop")]),t._v(" "),a("p",[t._v("从数组中移除指定的索引中对应的元素")]),t._v(" "),a("p",[t._v("db.student.update({name:'zfpx1'},{$pop:{hobbys:1}});")]),t._v(" "),a("h3",{attrs:{id:"_9-9-修改指定索引元素"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_9-9-修改指定索引元素"}},[t._v("#")]),t._v(" 9.9 修改指定索引元素")]),t._v(" "),a("p",[t._v('db.c3.update({name:\'zfpx1\'},{$set:{"hobbys.0":"smoking2"}});')]),t._v(" "),a("h2",{attrs:{id:"_10-文档的删除"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_10-文档的删除"}},[t._v("#")]),t._v(" 10. 文档的删除")]),t._v(" "),a("p",[t._v("remove方法是用来移除集合中的数据")]),t._v(" "),a("h3",{attrs:{id:"_10-1-语法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_10-1-语法"}},[t._v("#")]),t._v(" 10.1 语法")]),t._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("collection"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("remove"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("query"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n   {\n     justOne: "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n   }\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("h3",{attrs:{id:"_10-2-参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_10-2-参数"}},[t._v("#")]),t._v(" 10.2 参数")]),t._v(" "),a("p",[t._v("query :（可选）删除的文档的条件。\njustOne : （可选）如果设为 true 或 1，则只删除匹配到的多个文档中的第一个")]),t._v(" "),a("h3",{attrs:{id:"_10-3-实例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_10-3-实例"}},[t._v("#")]),t._v(" 10.3 实例")]),t._v(" "),a("p",[t._v("删除worker集合里name是zfpx2的所有文档数据")]),t._v(" "),a("blockquote",[a("p",[t._v("db.students.remove({name:'zfpx2'});\nWriteResult({ \"nRemoved\" : 2 })\n即使匹配多条也只删除一条")])]),t._v(" "),a("blockquote",[a("p",[t._v('db.students.remove({name:"zfpx2"},{justOne:true})')])]),t._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("WriteResult"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("{ "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"nRemoved"')]),t._v(" : "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" }"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h2",{attrs:{id:"_11-查询文档"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_11-查询文档"}},[t._v("#")]),t._v(" 11. 查询文档")]),t._v(" "),a("h3",{attrs:{id:"_11-1-find"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_11-1-find"}},[t._v("#")]),t._v(" 11.1 find")]),t._v(" "),a("p",[t._v("语法")]),t._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("collection_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("参数")]),t._v(" "),a("p",[t._v("collection_name 集合的名字\n实例 查询students下所有的文档")]),t._v(" "),a("p",[t._v("db.students.find()")]),t._v(" "),a("h3",{attrs:{id:"_11-2-查询指定列"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_11-2-查询指定列"}},[t._v("#")]),t._v(" 11.2 查询指定列")]),t._v(" "),a("p",[t._v("语法")]),t._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("collection_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("{queryWhere}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("{"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("key")]),t._v(":"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("key")]),t._v(":"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("参数列表")]),t._v(" "),a("p",[t._v("collection_name 集合的名字\nqueryWhere 参阅查询条件操作符\nkey 指定要返回的列\n1 表示要显示\n实例 只返回显示age列")]),t._v(" "),a("blockquote",[a("p",[t._v("db.students.find({},{age:1});")])]),t._v(" "),a("h3",{attrs:{id:"_11-3-findone"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_11-3-findone"}},[t._v("#")]),t._v(" 11.3 findOne")]),t._v(" "),a("p",[t._v("查询匹配结果的第一条数据 语法")]),t._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("collection_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("findOne"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("实例")]),t._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("students"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("findOne"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h3",{attrs:{id:"_11-4-in"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_11-4-in"}},[t._v("#")]),t._v(" 11.4 $in")]),t._v(" "),a("p",[t._v("查询字段在某个范围内")]),t._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("student"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("{age:{$"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("in")]),t._v(":"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("}}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("{name:"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("age:"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h3",{attrs:{id:"_11-5-nin"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_11-5-nin"}},[t._v("#")]),t._v(" 11.5 $nin")]),t._v(" "),a("p",[t._v("查询字段不在某个范围内")]),t._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("student"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("{age:{$nin:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("}}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("{name:"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("age:"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h3",{attrs:{id:"_11-6-not"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_11-6-not"}},[t._v("#")]),t._v(" 11.6 $not")]),t._v(" "),a("p",[t._v("对特定条件取反")]),t._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("student"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("{age:{$"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("not")]),t._v(":{$gte:"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("$lte:"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),t._v("}}}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h3",{attrs:{id:"_11-7-array"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_11-7-array"}},[t._v("#")]),t._v(" 11.7 array")]),t._v(" "),a("p",[t._v("对数组的查询")]),t._v(" "),a("p",[t._v('//按所有元素匹配\n//let result = db.student.find({friends:[ "A", "B", "C", "D" ]});\n//匹配一项 包含A的就可以\n//let result = db.student.find({friends:"A"});\n//$all 必须同时包含A B\n//let result = db.student.find({friends:{$all:[\'A\',"B"]}});\n//$in 或者关系 ，包含A或者B\n//let result = db.student.find({friends:{$in:[\'A\',"B"]}});\n//$size 按数组的长度去匹配\n//let result = db.student.find({friends:{$size:4}});\n//$slice 只返回数组中的某一部分\n//let result = db.student.find({friends:{$size:5}},{name:1,friends:{$slice:2}});\n//let result = db.student.find({friends:{$size:5}},{name:1,friends:{$slice:-2}});\n$slice:["$array", [startIndex, ] length ] （startIndex可以省略，默认从0开始）\n"friends" : [ "A", "B" ] }   "friends" : [ "C", "D" ]\ndb.stu.find({},{friends:{$slice:[0,3]}});  "friends" : [ "A", "B", "C" ]')]),t._v(" "),a("h3",{attrs:{id:"_11-8-where"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_11-8-where"}},[t._v("#")]),t._v(" 11.8 where")]),t._v(" "),a("p",[t._v('db.student.find({$where:"this.age>30"},{name:1,age:1});')]),t._v(" "),a("h3",{attrs:{id:"_11-9-cursor"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_11-9-cursor"}},[t._v("#")]),t._v(" 11.9 cursor")]),t._v(" "),a("p",[t._v("游标不是查询结果，而是查询的一个返回资源或者接口，通过这个接口，可以逐条读取数据\nvar result = db.student.find();")]),t._v(" "),a("p",[t._v("//while(result.hasNext()){\n//    printjson(result.next());\n//}")]),t._v(" "),a("h2",{attrs:{id:"_12-条件操作符"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_12-条件操作符"}},[t._v("#")]),t._v(" 12. 条件操作符")]),t._v(" "),a("p",[t._v("条件操作符用于比较两个表达式并从mongoDB集合中获取数据")]),t._v(" "),a("h3",{attrs:{id:"_12-1-大于操作符"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_12-1-大于操作符"}},[t._v("#")]),t._v(" 12.1 大于操作符")]),t._v(" "),a("p",[t._v("语法")]),t._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("collectoin_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("{"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("key")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(":{$gt:"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("value")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("}}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("参数")]),t._v(" "),a("p",[t._v("collectoin_name 集合名称\nkey 字段\nvalue 值\n查询 age 大于 30的数据")]),t._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("students"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("{age:{$gt:"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),t._v("}}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h3",{attrs:{id:"_12-2-大于等于操作符"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_12-2-大于等于操作符"}},[t._v("#")]),t._v(" 12.2 大于等于操作符")]),t._v(" "),a("p",[t._v("语法")]),t._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("collectoin_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("{"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("key")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(":{$gte:"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("value")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("}}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("参数")]),t._v(" "),a("p",[t._v("collectoin_name 集合名称\nkey 字段\nvalue 值\n查询age 3大于等于30 的数据")]),t._v(" "),a("p",[t._v("db.students.find({age: {$gte: 30}})")]),t._v(" "),a("h3",{attrs:{id:"_12-3-小于操作符"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_12-3-小于操作符"}},[t._v("#")]),t._v(" 12.3 小于操作符")]),t._v(" "),a("p",[t._v("语法")]),t._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("collectoin_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" {"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("key")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(":{$lt:"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("value")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("}}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("参数")]),t._v(" "),a("p",[t._v("collectoin_name集合名称\nkey 字段\nvalue 值\n实例")]),t._v(" "),a("p",[t._v("db.students.find({age: {$lt: 30}}) 查询age 小于30的数据")]),t._v(" "),a("h3",{attrs:{id:"_12-4-小于等于操作符"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_12-4-小于等于操作符"}},[t._v("#")]),t._v(" 12.4 小于等于操作符")]),t._v(" "),a("p",[t._v("语法")]),t._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("collectoin_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("{"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("key")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(":{$lte:"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("value")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("}}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("参数")]),t._v(" "),a("p",[t._v("collectoin_name集合名词\nkey字段\nvalue值\n查询age 小于等于30的数据")]),t._v(" "),a("p",[t._v("db.students.find({age: {$lte: 30}})")]),t._v(" "),a("h3",{attrs:{id:"_12-5-同时使用-gte和-lte"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_12-5-同时使用-gte和-lte"}},[t._v("#")]),t._v(" 12.5 同时使用 $gte和$lte")]),t._v(" "),a("p",[t._v("语法")]),t._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("collectoin_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("{"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("key")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(":{$gte:"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("value")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("key")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(":{$lte:"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("value")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("}}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("参数")]),t._v(" "),a("p",[t._v("collectoin_name 集合名称\nkey 字段\nvalue 值\n实例 查询age 大于等于 30 并且 age 小于等于 50 的数据")]),t._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("students"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("{age: {$gte: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" $lte: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),t._v("}}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h3",{attrs:{id:"_12-6-等于"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_12-6-等于"}},[t._v("#")]),t._v(" 12.6 等于")]),t._v(" "),a("p",[t._v("语法")]),t._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("collectoin_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("{"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("key")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(":"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("value")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("key")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(":"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("value")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("参数")]),t._v(" "),a("p",[t._v("collectoin_name集合名词\nkey字段\nvalue值\n查询age = 30的数据")]),t._v(" "),a("p",[t._v('db.students.find({"age": 30})`')]),t._v(" "),a("h3",{attrs:{id:"_12-7-使用-id进行查询"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_12-7-使用-id进行查询"}},[t._v("#")]),t._v(" 12.7 使用 _id进行查询")]),t._v(" "),a("p",[t._v("语法")]),t._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("collectoin_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("{"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"_id"')]),t._v(" : ObjectId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"value"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("参数")]),t._v(" "),a("p",[t._v("value _id的值\n实例 查询_id是 562af23062d5a57609133974 数据")]),t._v(" "),a("blockquote",[a("p",[t._v('db.students.find({_id:ObjectId("5adb666ecd738e9771638985")});')])]),t._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("{ "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"_id"')]),t._v(" : ObjectId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"5adb666ecd738e9771638985"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name"')]),t._v(" : "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"zzzz"')]),t._v(" }\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h3",{attrs:{id:"_12-8-查询结果集的条数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_12-8-查询结果集的条数"}},[t._v("#")]),t._v(" 12.8 查询结果集的条数")]),t._v(" "),a("p",[t._v("语法")]),t._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("collectoin_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("count")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("参数")]),t._v(" "),a("p",[t._v("collectoin_name 集合名称\n实例")]),t._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("students"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("count")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h3",{attrs:{id:"_12-9-正则匹配"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_12-9-正则匹配"}},[t._v("#")]),t._v(" 12.9 正则匹配")]),t._v(" "),a("p",[t._v("语法")]),t._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("collection"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("{"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("key")]),t._v(":"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("value")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("参数")]),t._v(" "),a("p",[t._v("collectoin_name 集合名称\nkey 字段\nvalue 值\n实例 查询name里包含zhang的数据")]),t._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("students"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("{name:"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("value")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("查询某个字段的值当中是否以另一个值开头")]),t._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("students"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("{name:"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),t._v("zhang"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h2",{attrs:{id:"_13-与和或"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_13-与和或"}},[t._v("#")]),t._v(" 13. 与和或")]),t._v(" "),a("h3",{attrs:{id:"_13-1-and"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_13-1-and"}},[t._v("#")]),t._v(" 13.1 and")]),t._v(" "),a("p",[t._v("find方法可以传入多个键(key)，每个键(key)以逗号隔开")]),t._v(" "),a("p",[t._v("语法")]),t._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("collection_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("{key1:value1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" key2:value2}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("实例 查询name是zfpx并且age是1的数据")]),t._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("students"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("{name:"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'zfpx'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("age:"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h3",{attrs:{id:"_13-2-or"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_13-2-or"}},[t._v("#")]),t._v(" 13.2 or")]),t._v(" "),a("p",[t._v("语法")]),t._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("collection_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n   {\n      $"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("or")]),t._v(": "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n   {key1: value1}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" {key2:value2}\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n   }\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br")])]),a("p",[t._v("实例 查询age = 30 或者 age = 50 的数据")]),t._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("students"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("{$"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("or")]),t._v(":"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("{age:"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),t._v("}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("{age:"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),t._v("}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h3",{attrs:{id:"_13-3-and和or联用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_13-3-and和or联用"}},[t._v("#")]),t._v(" 13.3 and和or联用")]),t._v(" "),a("p",[t._v("语法")]),t._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("collection_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n   {\n     key1:value1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n     key2:value2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n     $"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("or")]),t._v(": "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n   {key1: value1}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n   {key2:value2}\n     "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n   }\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br")])]),a("p",[t._v("实例 查询 name是zfpx 并且 age是30 或者 age是 50 的数据")]),t._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("students"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("{name:"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'zfpx'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("$"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("or")]),t._v(":"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("{age:"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),t._v("}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("{age:"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),t._v("}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h2",{attrs:{id:"_14-分页查询"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_14-分页查询"}},[t._v("#")]),t._v(" 14. 分页查询")]),t._v(" "),a("h3",{attrs:{id:"_14-1-limit"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_14-1-limit"}},[t._v("#")]),t._v(" 14.1 limit")]),t._v(" "),a("p",[t._v("读取指定数量的数据记录 语法")]),t._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("collectoin_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("limit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("number"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("参数")]),t._v(" "),a("p",[t._v("collectoin_name集合\nnumber读取的条数\n实例 查询前3条数据")]),t._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("students"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("limit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h3",{attrs:{id:"_14-2-skip"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_14-2-skip"}},[t._v("#")]),t._v(" 14.2 skip")]),t._v(" "),a("p",[t._v("跳过指定数量的数据，skip方法同样接受一个数字参数作为跳过的记录条数 语法")]),t._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("collectoin_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("skip"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("number"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("参数")]),t._v(" "),a("p",[t._v("collectoin_name集合\nnumber跳过的条数\n实例 查询3条以后的数据")]),t._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("students"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("skip"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h3",{attrs:{id:"_14-3-skip-limit"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_14-3-skip-limit"}},[t._v("#")]),t._v(" 14.3 skip+limit")]),t._v(" "),a("p",[t._v("通常用这种方式来实现分页功能 语法")]),t._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("collectoin_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("skip"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("skipNum"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("limit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("limitNum"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("参数")]),t._v(" "),a("p",[t._v("collectoin_name 集合名称\nskipNum 跳过的条数\nlimitNum 限制返回的条数\n实例 查询在4-6之间的数据")]),t._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("students"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("skip"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("limit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h3",{attrs:{id:"_14-4-sort排序"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_14-4-sort排序"}},[t._v("#")]),t._v(" 14.4 sort排序")]),t._v(" "),a("p",[t._v("sort()方法可以通过参数指定排序的字段，并使用 1 和 -1 来指定排序的方式，其中 1 为升序排列，而-1是用于降序排列。 语法")]),t._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("collectoin_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sort"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("{"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("key")]),t._v(":"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ndb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("collectoin_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sort"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("{"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("key")]),t._v(":"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("p",[t._v("参数")]),t._v(" "),a("p",[t._v("collectoin_name集合\nkey表示字段\n实例 查询出并升序排序 {age:1} age表示按那个字段排序 1表示升序")]),t._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("students"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sort"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("{age:"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h2",{attrs:{id:"_15-执行脚本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_15-执行脚本"}},[t._v("#")]),t._v(" 15. 执行脚本")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" username "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'zfpx'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" password "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'123456'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" user "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"username"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" username"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"password"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" password "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" db "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("connect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'students'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//选择users数据库")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" result "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("users"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("insert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'write '")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" start "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Date"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("now")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" db "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("connect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'students'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("users"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("insert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"username"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"zfpx"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" i "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" cost "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Date"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("now")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" start"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'cost '")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" cost "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("' ms'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" start "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Date"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("now")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" db "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("connect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'students'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" users "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    users"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"username"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"zfpx"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" i "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\ndb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("users"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("insert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("users"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" cost "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Date"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("now")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" start"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'cost '")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" cost "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("' ms'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br")])]),a("p",[t._v("在命令行中执行")]),t._v(" "),a("p",[t._v('script>mongo 1.js\nMongoDB shell version: 2.6.7\nconnecting to: test\nconnecting to: students\nwrite WriteResult({ "nInserted" : 1 })')]),t._v(" "),a("h2",{attrs:{id:"_16-备份与导出"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_16-备份与导出"}},[t._v("#")]),t._v(" 16. 备份与导出")]),t._v(" "),a("p",[t._v("mongodump\n-- host 127.0.0.1\n-- port 27017\n-- out D:/databack/backup\n-- collection mycollection\n-- db test\n-- username\n-- password\n//mongodump --host 127.0.0.1 --port 27017 --out ./backup --collection users --db students\n//db.users.drop();")]),t._v(" "),a("p",[t._v("mongorestore\n--host\n--port\n--username\n--password")]),t._v(" "),a("p",[t._v("// mongorestore --host 127.0.0.1 --port 27017 ./backup")]),t._v(" "),a("h2",{attrs:{id:"_17-权限"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_17-权限"}},[t._v("#")]),t._v(" 17. 权限")]),t._v(" "),a("h3",{attrs:{id:"_17-1-创建用户"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_17-1-创建用户"}},[t._v("#")]),t._v(" 17.1 创建用户")]),t._v(" "),a("p",[t._v("使用use admin进入我们的admin库\n使用db.createUser方法来创建集合")]),t._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("createUser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("{\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("user")]),t._v(":"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'zfpx'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    pwd:"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'123456'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    customData:{\n        name:"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'zhufengpeixun'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        email:"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'zhufengpeixun@126.com'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        age:"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9")]),t._v("\n    }"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    roles:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        {\n          role:"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'readWrite'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          db:"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'school'")]),t._v("\n        }"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'read'")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br")])]),a("h3",{attrs:{id:"_17-2-查询用户"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_17-2-查询用户"}},[t._v("#")]),t._v(" 17.2 查询用户")]),t._v(" "),a("p",[t._v("db.system.users.find();")]),t._v(" "),a("h3",{attrs:{id:"_17-3-删除用户"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_17-3-删除用户"}},[t._v("#")]),t._v(" 17.3 删除用户")]),t._v(" "),a("p",[t._v("db.system.users.remove({user:'zfpx'});")]),t._v(" "),a("h3",{attrs:{id:"_17-4-启动数据库权限检查"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_17-4-启动数据库权限检查"}},[t._v("#")]),t._v(" 17.4 启动数据库权限检查")]),t._v(" "),a("p",[t._v("mongod --auth\nmongo  -u zfpx -p 123456 127.0.0.1:27017/admin")]),t._v(" "),a("h3",{attrs:{id:"_17-5-鉴权"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_17-5-鉴权"}},[t._v("#")]),t._v(" 17.5 鉴权")]),t._v(" "),a("p",[t._v("use admin;\ndb.auth('zfpx','zfpx');\n正确返回1，如果错误返回0")]),t._v(" "),a("h2",{attrs:{id:"_18-索引"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_18-索引"}},[t._v("#")]),t._v(" 18. 索引")]),t._v(" "),a("h3",{attrs:{id:"_18-1-准备数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_18-1-准备数据"}},[t._v("#")]),t._v(" 18.1 准备数据")]),t._v(" "),a("p",[t._v("var db = connect('school');//选择users数据库\nvar users = [];\nfor(var i=0;i<20;i++){\nusers.push({_id:i,name:'zfpx'+i});\n}\nprint(users.length);\ndb.users.insert(users);")]),t._v(" "),a("h3",{attrs:{id:"_18-2-打印出查询时间"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_18-2-打印出查询时间"}},[t._v("#")]),t._v(" 18.2 打印出查询时间")]),t._v(" "),a("p",[t._v("var startTime = Date.now();\nvar  db = connect('school');"),a("br"),t._v('\nvar  records=db.users.find({name:"zfpx100"});\nrecords.forEach(function(item){printjson(item)});\nprint(Date.now() - startTime);')]),t._v(" "),a("h3",{attrs:{id:"_18-3-建立索引"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_18-3-建立索引"}},[t._v("#")]),t._v(" 18.3 建立索引")]),t._v(" "),a("p",[t._v("db.users.ensureIndex({name:1});")]),t._v(" "),a("h2",{attrs:{id:"_19-附录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_19-附录"}},[t._v("#")]),t._v(" 19. 附录")]),t._v(" "),a("h3",{attrs:{id:"_19-1-objectid构成"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_19-1-objectid构成"}},[t._v("#")]),t._v(" 19.1 ObjectId构成")]),t._v(" "),a("p",[t._v("之前我们使用MySQL等关系型数据库时，主键都是设置成自增的。但在分布式环境下，这种方法就不可行了，会产生冲突。为此，MongoDB采用了一个称之为ObjectId的类型来做主键。ObjectId是一个12字节的 BSON 类型字符串。按照字节顺序，一次代表：")]),t._v(" "),a("p",[t._v("4字节：UNIX时间戳\n3字节：表示运行MongoDB的机器\n2字节：表示生成此_id的进程\n3字节：由一个随机数开始的计数器生成的值")]),t._v(" "),a("h3",{attrs:{id:"_19-2-mongodb启动命令mongod参数说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_19-2-mongodb启动命令mongod参数说明"}},[t._v("#")]),t._v(" 19.2 Mongodb启动命令mongod参数说明")]),t._v(" "),a("p",[t._v("选项\t含义\n--port\t指定服务端口号，默认端口27017\n--logpath\t指定MongoDB日志文件，注意是指定文件不是目录\n--logappend\t使用追加的方式写日志\n--dbpath\t指定数据库路径\n--directoryperdb\t设置每个数据库将被保存在一个单独的目录")]),t._v(" "),a("h3",{attrs:{id:"_19-3-集合命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_19-3-集合命令"}},[t._v("#")]),t._v(" 19.3 集合命令")]),t._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("students"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("help"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nDBCollection help\ndb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("students"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("help"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("show")]),t._v(" DBCursor help 显示游标帮助\ndb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("students"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("count")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" 显示条数\ndb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("students"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("copyTo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("newColl"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" duplicates collection "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("by")]),t._v(" copying "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("all")]),t._v(" docum ents "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("to")]),t._v(" newColl"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("no")]),t._v(" indexes are copied"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" 把一个旧集合拷贝到一个新的集合，不拷贝索引\ndb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("students"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("convertToCapped"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("maxBytes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" calls {convertToCapped:"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'students '")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" size:maxBytes}} command\ndb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("students"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dataSize"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" 数据大小\ndb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("students"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("distinct")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("key")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("g"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("students"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("distinct")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'x'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" 统计唯一的"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("key")]),t._v("的数量\ndb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("students"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("drop")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("drop")]),t._v(" the collection ，删除集合\ndb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("students"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dropIndex"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("index")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("g"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("students"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dropIndex"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"indexName"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" 删除索引 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("or")]),t._v(" db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("students"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dropIndex"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" { "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"indexKey"')]),t._v(" : "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" } "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ndb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("students"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dropIndexes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" 删除 所有的索引\ndb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("students"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ensureIndex"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("keypattern"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" options "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("is")]),t._v(" an object wit h these possible "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fields")]),t._v(": name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("unique")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" dropDups 添加索引\ndb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("students"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("reIndex"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ndb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("students"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("query"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fields")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" query "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("is")]),t._v(" an optional query filter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fields")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("is")]),t._v(" optional "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("set")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("of")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fields")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("to")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" 查找文档\n     e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("g"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("students"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" {x:\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("77")]),t._v("} "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" {name:"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" x:"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("} "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ndb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("students"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("count")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" 数量\ndb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("students"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("limit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" 限制返回的条数\ndb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("students"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("skip"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" 设置跳过的条数\ndb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("students"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sort"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" 排序\ndb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("students"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("findOne"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("query"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" 查找一条\ndb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("students"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("findAndModify"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" { "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("update")]),t._v(" : "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" remove : "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("bool")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" query: {}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" sort: {}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'new'")]),t._v(": "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" } "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" 查找并且修改 更新后的值，是否删除，查询条件 排序 是否返回新值\ndb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("students"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getDB"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" get DB object associated "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("with")]),t._v(" collection 获得DB\ndb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("students"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getPlanCache"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" get query "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("plan")]),t._v(" cache associated "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("with")]),t._v(" collecti "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("on")]),t._v("\ndb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("students"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getIndexes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" 获取索引\ndb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("students"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("group")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" { "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("key")]),t._v(" : "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" initial: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" reduce : "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" cond: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" } "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" 分组统计\ndb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("students"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("insert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" 插入文档\ndb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("students"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mapReduce"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" mapFunction "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" reduceFunction "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" 统计\ndb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("students"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("aggregate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pipeline"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" performs an agg regation "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("on")]),t._v(" a collection"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("returns")]),t._v(" a "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("cursor")]),t._v(" 聚合\ndb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("students"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("remove"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("query"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" 删除\ndb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("students"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("renameCollection"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" newName "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" renames the colle ction"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" 重命名集合\ndb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("students"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("runCommand"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" name "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" runs a db command "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("with")]),t._v(" the gi ven name "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),t._v(" the "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("first")]),t._v(" param "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("is")]),t._v(" the collection name\ndb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("students"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("save")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" 保存对象\ndb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("students"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("stats"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" 统计信息\ndb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("students"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("storageSize"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" includes free space allocated "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("to")]),t._v(" this collec tion\ndb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("students"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("totalIndexSize"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" size "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("in")]),t._v(" bytes "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("of")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("all")]),t._v(" the indexes\ndb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("students"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("totalSize"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" storage allocated "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("all")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("data")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("and")]),t._v(" indexes\ndb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("students"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("update")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("query"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" upsert_bool"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" multi_bool"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" instead o f two flags"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" you can pass an object "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("with")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fields")]),t._v(": upsert"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" multi 更新\ndb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("students"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("validate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" SLOW\ndb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("students"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getShardVersion"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" only "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("with")]),t._v(" sharding\ndb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("students"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getShardDistribution"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" prints "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("statistics")]),t._v(" about "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("data")]),t._v(" distri bution "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("in")]),t._v(" the cluster\ndb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("students"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getSplitKeysForChunks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" calculates split p oints "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("over")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("all")]),t._v(" chunks "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("and")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("returns")]),t._v(" splitter "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v("\ndb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("students"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getWriteConcern"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("returns")]),t._v(" the "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("write")]),t._v(" concern used "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("any")]),t._v(" o perations "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("on")]),t._v(" this collection"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" inherited "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" server"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("db "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("set")]),t._v("\ndb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("students"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("setWriteConcern"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" sets the "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("write")]),t._v(" conc ern "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" writes "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("to")]),t._v(" the collection\ndb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("students"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("unsetWriteConcern"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" unsets the "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("write")]),t._v(" concern "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" writes "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("to")]),t._v(" the collection\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br"),a("span",{staticClass:"line-number"},[t._v("25")]),a("br"),a("span",{staticClass:"line-number"},[t._v("26")]),a("br"),a("span",{staticClass:"line-number"},[t._v("27")]),a("br"),a("span",{staticClass:"line-number"},[t._v("28")]),a("br"),a("span",{staticClass:"line-number"},[t._v("29")]),a("br"),a("span",{staticClass:"line-number"},[t._v("30")]),a("br"),a("span",{staticClass:"line-number"},[t._v("31")]),a("br"),a("span",{staticClass:"line-number"},[t._v("32")]),a("br"),a("span",{staticClass:"line-number"},[t._v("33")]),a("br"),a("span",{staticClass:"line-number"},[t._v("34")]),a("br"),a("span",{staticClass:"line-number"},[t._v("35")]),a("br"),a("span",{staticClass:"line-number"},[t._v("36")]),a("br"),a("span",{staticClass:"line-number"},[t._v("37")]),a("br"),a("span",{staticClass:"line-number"},[t._v("38")]),a("br"),a("span",{staticClass:"line-number"},[t._v("39")]),a("br"),a("span",{staticClass:"line-number"},[t._v("40")]),a("br"),a("span",{staticClass:"line-number"},[t._v("41")]),a("br"),a("span",{staticClass:"line-number"},[t._v("42")]),a("br"),a("span",{staticClass:"line-number"},[t._v("43")]),a("br"),a("span",{staticClass:"line-number"},[t._v("44")]),a("br"),a("span",{staticClass:"line-number"},[t._v("45")]),a("br")])]),a("h2",{attrs:{id:"_20-用户和权限"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_20-用户和权限"}},[t._v("#")]),t._v(" 20. 用户和权限")]),t._v(" "),a("h3",{attrs:{id:"_20-1-角色"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_20-1-角色"}},[t._v("#")]),t._v(" 20.1 角色")]),t._v(" "),a("h4",{attrs:{id:"_20-1-1-数据库用户角色"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_20-1-1-数据库用户角色"}},[t._v("#")]),t._v(" 20.1.1 数据库用户角色")]),t._v(" "),a("p",[t._v("针对每一个数据库进行控制。")]),t._v(" "),a("ul",[a("li",[t._v("read :提供了读取所有非系统集合，以及系统集合中的system.indexes, system.js, system.namespaces")]),t._v(" "),a("li",[t._v("readWrite: 包含了所有read权限，以及修改所有非系统集合的和系统集合中的system.js的权限")])]),t._v(" "),a("h4",{attrs:{id:"_20-1-2-数据库管理角色"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_20-1-2-数据库管理角色"}},[t._v("#")]),t._v(" 20.1.2 数据库管理角色")]),t._v(" "),a("p",[t._v("每一个数据库包含了下面的数据库管理角色。")]),t._v(" "),a("ul",[a("li",[t._v("dbOwner：该数据库的所有者，具有该数据库的全部权限。")]),t._v(" "),a("li",[t._v("dbAdmin：一些数据库对象的管理操作，但是没有数据库的读写权限。（参考：http://docs.mongodb.org/manual/reference/built-in-roles/#dbAdmin）")]),t._v(" "),a("li",[t._v("userAdmin：为当前用户创建、修改用户和角色。拥有userAdmin权限的用户可以将该数据库的任意权限赋予任意的用户。")])]),t._v(" "),a("h4",{attrs:{id:"_20-1-3-集群管理权限"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_20-1-3-集群管理权限"}},[t._v("#")]),t._v(" 20.1.3 集群管理权限")]),t._v(" "),a("ul",[a("li",[t._v("admin数据库包含了下面的角色，用户管理整个系统，而非单个数据库。这些权限包含了复制集和共享集群的管理函数。")]),t._v(" "),a("li",[t._v("clusterAdmin：提供了最大的集群管理功能。相当于clusterManager, clusterMonitor, and hostManager和dropDatabase的权限组合。")]),t._v(" "),a("li",[t._v("clusterManager：提供了集群和复制集管理和监控操作。拥有该权限的用户可以操作config和local数据库（即分片和复制功能）")]),t._v(" "),a("li",[t._v("clusterMonitor：仅仅监控集群和复制集。")]),t._v(" "),a("li",[t._v("hostManager：提供了监控和管理服务器的权限，包括shutdown节点，logrotate, repairDatabase等。 备份恢复权限：admin数据库中包含了备份恢复数据的角色。包括backup、restore等等。")])]),t._v(" "),a("h4",{attrs:{id:"_20-1-4-所有数据库角色"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_20-1-4-所有数据库角色"}},[t._v("#")]),t._v(" 20.1.4 所有数据库角色")]),t._v(" "),a("ul",[a("li",[t._v("admin数据库提供了一个mongod实例中所有数据库的权限角色：")]),t._v(" "),a("li",[t._v("readAnyDatabase：具有read每一个数据库权限。但是不包括应用到集群中的数据库。")]),t._v(" "),a("li",[t._v("readWriteAnyDatabase：具有readWrite每一个数据库权限。但是不包括应用到集群中的数据库。")]),t._v(" "),a("li",[t._v("userAdminAnyDatabase：具有userAdmin每一个数据库权限，但是不包括应用到集群中的数据库。")]),t._v(" "),a("li",[t._v("dbAdminAnyDatabase：提供了dbAdmin每一个数据库权限，但是不包括应用到集群中的数据库。")])]),t._v(" "),a("h4",{attrs:{id:"_20-1-5-超级管理员权限"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_20-1-5-超级管理员权限"}},[t._v("#")]),t._v(" 20.1.5 超级管理员权限")]),t._v(" "),a("p",[t._v("root: dbadmin到admin数据库、useradmin到admin数据库以及UserAdminAnyDatabase。但它不具有备份恢复、直接操作system.*集合的权限，但是拥有root权限的超级用户可以自己给自己赋予这些权限。")]),t._v(" "),a("h4",{attrs:{id:"_20-1-6-备份恢复角色"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_20-1-6-备份恢复角色"}},[t._v("#")]),t._v(" 20.1.6 备份恢复角色")]),t._v(" "),a("p",[t._v("backup、restore；")]),t._v(" "),a("h4",{attrs:{id:"_20-1-7-内部角色"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_20-1-7-内部角色"}},[t._v("#")]),t._v(" 20.1.7 内部角色")]),t._v(" "),a("p",[t._v("__system")]),t._v(" "),a("h3",{attrs:{id:"_20-2-权限配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_20-2-权限配置"}},[t._v("#")]),t._v(" 20.2 权限配置")]),t._v(" "),a("ul",[a("li",[t._v("数据库用户角色 read readWrite")]),t._v(" "),a("li",[t._v("数据库管理角色 dbAdmin dbOwner userAdmin")]),t._v(" "),a("li",[t._v("集群管理角色 clusterAdmin clusterManager clusterMonitor hostManager")]),t._v(" "),a("li",[t._v("备份恢复角色 backup restore")]),t._v(" "),a("li",[t._v("所有数据库角色 readAnyDatabase readWriteAnyDatabase userAdminAnyDatabase dbAdminAnyDatabase")]),t._v(" "),a("li",[t._v("超级用户角色 root")])]),t._v(" "),a("p",[t._v("mongod.conf 配置文件")]),t._v(" "),a("h4",{attrs:{id:"_20-2-1-常见命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_20-2-1-常见命令"}},[t._v("#")]),t._v(" 20.2.1 常见命令")]),t._v(" "),a("p",[t._v("ps -ef | grep mongo //查看当前进程\n/usr/bin/mongod -f /etc/mongod.conf //寻找配置文件\nsystemctl restart mongod.service //重启mongodb")]),t._v(" "),a("h4",{attrs:{id:"_20-2-2-创建超级管理员"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_20-2-2-创建超级管理员"}},[t._v("#")]),t._v(" 20.2.2 创建超级管理员")]),t._v(" "),a("p",[t._v("show users //显示所有用户")]),t._v(" "),a("h4",{attrs:{id:"_20-2-3-创建用户"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_20-2-3-创建用户"}},[t._v("#")]),t._v(" 20.2.3 创建用户")]),t._v(" "),a("p",[t._v("use admin")]),t._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("createUser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("{\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("user")]),t._v(":"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'admin'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  pwd:"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'123456'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  roles:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("{role:"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'root'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("db:"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'admin'")]),t._v("}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("h4",{attrs:{id:"_20-2-4-管理员登录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_20-2-4-管理员登录"}},[t._v("#")]),t._v(" 20.2.4 管理员登录")]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("mongo admin -u admin -p "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("123456")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h4",{attrs:{id:"_20-2-5-给每个库创创建一个自己的管理员"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_20-2-5-给每个库创创建一个自己的管理员"}},[t._v("#")]),t._v(" 20.2.5 给每个库创创建一个自己的管理员")]),t._v(" "),a("p",[t._v("use question;")]),t._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("createUser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("{\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("user")]),t._v(":"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'questionadmin'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  pwd:"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'123456'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  roles:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("{role:"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'dbOwner'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("db:"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'question'")]),t._v("}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("h4",{attrs:{id:"_20-2-6-删除用户"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_20-2-6-删除用户"}},[t._v("#")]),t._v(" 20.2.6 删除用户")]),t._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dropUser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"admin"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 删除某个用户,接受字符串参数")]),t._v("\ndb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dropAllUser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("     "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 删除当前库的所有用户")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("h4",{attrs:{id:"_20-2-7-更新用户"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_20-2-7-更新用户"}},[t._v("#")]),t._v(" 20.2.7 更新用户")]),t._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("updateUser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'admin'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("{pwd:"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'password'")]),t._v("}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h4",{attrs:{id:"_20-2-8-密码认证"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_20-2-8-密码认证"}},[t._v("#")]),t._v(" 20.2.8 密码认证")]),t._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("auth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'admin'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'password'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])])])}),[],!1,null,null,null);s.default=e.exports}}]);